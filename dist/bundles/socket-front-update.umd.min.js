!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("rxjs"),require("rxjs/operators"),require("socket.io-client")):"function"==typeof define&&define.amd?define("socket-front-update",["exports","@angular/core","rxjs","rxjs/operators","socket.io-client"],t):t((e=e||self)["socket-front-update"]={},e.ng.core,e.rxjs,e.rxjs.operators,e.io__default)}(this,(function(e,t,o,n,r){"use strict";var i="default"in r?r.default:r,c=new t.InjectionToken("__SOCKET_IO_CONFIG_"+Math.floor(Math.random()*Math.floor(100)).toString()+"__"),s={url:"",path:"/socket.io",reconnection:!0,reconnectionAttempts:1/0,reconnectionDelay:1e3,reconnectionDelayMax:5e3,randomizationFactor:.5,timeout:2e4,autoConnect:!0,query:{},transports:["polling","websocket"],extraHeaders:{}},u=function(){function e(e){var o=this;this.Config=e,this.tokenUpdater=new t.EventEmitter,this.subscribersCounter=0,this.config=e?e.config:s,this.url=e?e.url:"",e&&!e.auth?this.socket=this.connect():this.tokenUpdater.subscribe((function(t){t&&(o.config.extraHeaders.Authorization="Baerer "+t,o.socket=o.connect(),o.redirectLogin(e.loginPage))}))}return e.prototype.roomData=function(e,t){this.socket.join(e),this.socket.on(e,t)},e.prototype.of=function(e){this.socket.of(e)},e.prototype.on=function(e,t){this.socket.on(e,t)},e.prototype.once=function(e,t){this.socket.once(e,t)},e.prototype.connect=function(){return(i||r)(this.url,this.config).connect()},e.prototype.disconnect=function(e){return this.socket.disconnect.apply(this.socket,arguments)},e.prototype.emit=function(e,t,o){this.socket.emit(e,t,o)},e.prototype.removeListener=function(e,t){return this.socket.removeListener.apply(this.socket,arguments)},e.prototype.removeAllListeners=function(e){return this.socket.removeAllListeners.apply(this.socket,arguments)},e.prototype.fromEvent=function(e){var t=this;return this.subscribersCounter++,new o.Observable((function(o){return t.socket.on(e,(function(e){o.next(e)})),function(){1===t.subscribersCounter&&t.socket.removeListener(e)}})).pipe(n.share())},e.prototype.fromOneTimeEvent=function(e){var t=this;return new Promise((function(o){return t.once(e,o)}))},e.prototype.redirectLogin=function(e){this.socket&&e&&this.socket.on("session-time-out",(function(t){window.location.replace(e)}))},e}(),f=function(e){return new u(e)},p=function(){function e(){}return e.forRoot=function(t){return{ngModule:e,providers:[{provide:c,useValue:t},{provide:u,useFactory:f,deps:[c]}]}},e.ɵmod=t.ɵɵdefineNgModule({type:e}),e.ɵinj=t.ɵɵdefineInjector({factory:function(t){return new(t||e)}}),e}();e.SOCKET_CONFIG_TOKEN=c,e.Socket=u,e.SocketFactory=f,e.SocketFrontUpdateModule=p,e.SocketIoModule=p,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=socket-front-update.umd.min.js.map